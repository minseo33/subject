<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"> <!--hymeleaf 속성 사용-->

<head>
	<meta charset="UTF-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
	<style>
		a {
			text-decoration: none;
		}

		table {
			border-collapse: collapse;
			width: 1000px;
			margin-top: 20px;
			text-align: center;
		}

		td,
		th {
			border: 1px solid black;
			height: 50px;
		}

		th {
			font-size: 17px;
		}

		thead {
			font-weight: 700;
		}

		.table_wrap {
			margin: 50px 0 0 50px;
		}

		.top_btn {
			font-size: 20px;
			padding: 6px 12px;
			background-color: #fff;
			border: 1px solid #ddd;
			font-weight: 600;
		}

		.pagination {
			display: flex;
			justify-content: center;
			margin-top: 20px;
		}

		.pagination a {
			margin: 0 50px;
		}

		.pagination .active {
			font-weight: bold;
		}

		.top_btn {
			font-size: 20px;
			padding: 6px 12px;
			background-color: #0000ff;
			border: 1px solid #ddd;
			/* 버튼에 1px 두께의 실선 테두리 추가 */
			font-weight: 600;
			text-decoration: none;
			/* 기본 텍스트 밑줄 제거 */
			display: inline-block;
			/* 텍스트 주변으로 테두리를 감싸기 위해 inline-block 설정 */
		}

		.top_btn:hover {
			background-color: #ddd;
			/* 마우스를 올리면 배경색 변경 */
		}
	</style>
	<script>
		function chgPageSize() { //onchange 실행
			var data = document.getElementById("pageSize").value; //페이지당 보여지는 게시글 최대 개수
			//document의 id가 pazesize라는 id값을 가진 요소의 value값을 data 변수에 담음
			location.href="/board/ssr?pageSize="+data; //pageSize + 받은 변수
			//실질적인 url호출
		}
	</script>
</head>

<body>
	<h1 th:text="'게시판'">직접 입력</h1>
	<div class="table_wrap">
		<table>
			<thead>
				<tr>
					<th>번호</th>
					<th>제목</th>
					<th>내용</th>
					<th>작성자</th>
					<th>작성일시</th>
				</tr>
			</thead>
			<tbody>
				<!-- 게시판 데이터 반복 -->
				<tr th:each="datum, i: ${data}"> <!-- 리스트 반복하면서 각 데이터 행으로 생성 -->
					<td th:text="${i.count}"></td> <!-- 반복 상태 변수 --> <!--번호-->
					<td th:text="${datum.subject}"></td> <!--제목-->
					<td th:text="${datum.contents}"></td> <!--내용-->
					<td th:text="${datum.writer}"></td> <!--작성자-->
					<td th:text="${#dates.format(datum.registerTime, 'yyyy-MM-dd HH:mm')}"></td> <!--작성일시-->
				</tr>
			</tbody>
		</table>


		 <!--페이지네이션--> <!--pageSize=${pageSize}는 Controller의 pageSize와 매칭-->
		<nav aria-label="Page navigation example ">
		  <ul class="pagination">
			  
		  <li class="page-item">
		      <a class="page-link" th:href="@{/board/ssr?page=1}" aria-label="Previous"> <!-- 1페이지로 지정 -->
		        <span aria-hidden="true">처음</span>
		      </a>
		    </li>
		    
		    <li class="page-item">
		      <a class="page-link" th:href="@{/board/ssr(page=${pagination.prevBlock}, pageSize=${pageSize})}" aria-label="Previous"> <!--prevBlock은 이전 블럭의 마지막 페이지 -->
		        <span aria-hidden="true">이전</span>
		      </a>
		    </li>
		    
		    <th:block  th:with="start = ${pagination.startPage}, end = ${pagination.endPage}"> 
			    <li class="page-item" 
			    		 th:with="start = ${pagination.startPage}, end = ${pagination.endPage}"
			    		th:each="pageButton : ${#numbers.sequence(start, end)}">
			    		<a class="page-link" th:href="@{/board/ssr(page=${pageButton}, pageSize=${pageSize})}" th:text=${pageButton}></a>
			    </li>
		    </th:block>
		    
		    <li class="page-item">
		      <a class="page-link" th:href="@{/board/ssr(page=${pagination.nextBlock}, pageSize=${pageSize})}" aria-label="Next"> <!--nextBlock은 다음 블럭의 시작 페이지 -->
		        <span aria-hidden="true">다음</span>
		      </a>
		    </li>
		    
		    <li class="page-item">
		      <a class="page-link" th:href="@{/board/ssr(page=${pagination.totalPageCnt}, pageSize=${pageSize})}" aria-label="Previous">
		        <span aria-hidden="true">끝</span>
		      </a>
		    </li>
		  </ul>
		</nav>
	</div>


	<form>
		<label for="lang">페이지당노출수</label>
		<select name="languages" id="pageSize" onchange="chgPageSize()"> <!--onchange = chgPageSize() 값이 변경되면 chgPageSize가 실행됨.-->
			<option value=10>10</option>
			<option value=20>20</option>
			<option value=30>30</option>
		</select>
	</form>

</body>

</html>

<!--<th:block>: Thymeleaf에서 반복적인 HTML 코드를 생성하기 위해 사용, th:each 속성을 사용하여 반복적으로 페이지 번호 생성-->

<!--th:with: start와 end 변수를 생성하여 페이지 번호 반복하는데 사용-->

<!--th:href: 링크의 URL을 동적으로 생성.
 ${...} 표현식을 사용하여 변수를 삽입하며, 클라이언트에서는 이 URL을 클릭하여 해당 페이지로 이동-->

<!--th:text: 링크의 텍스트를 동적으로 설정합니다. ${...} 표현식을 사용하여 페이지 번호를 표시-->